import{a as g}from"./chunk-FBW7R5MW.js";import{a as b}from"./chunk-IQ3DILG5.js";import{d as l,e as u}from"./chunk-K5ZT4YFK.js";import{Ea as m,Wc as d,ea as c,ka as p,v as h}from"./chunk-FY6FPK4F.js";var i=class{gender;minAge=18;maxAge=99;orderBy="lastActive";pageNumber=1;pageSize=5;constructor(e){this.gender=e?.gender==="female"?"male":"female"}};var f=class a{http=p(d);accountService=p(g);baseUrl=b.apiUrl;user=this.accountService.currentUser();paginatedResponse=m(null);memberCache=new Map;userParams=m(new i(this.user));resetUserParams(){this.userParams.set(new i(this.user))}getMembers(){let e=this.memberCache.get(Object.values(this.userParams()).join("-"));if(e)return u(e,this.paginatedResponse);let{pageNumber:r,pageSize:s,minAge:n,maxAge:v,gender:P,orderBy:M}=this.userParams(),t=l(r,s);return t=t.append("minAge",n),t=t.append("maxAge",v),t=t.append("gender",P),t=t.append("orderBy",M),this.http.get(`${this.baseUrl}/users`,{observe:"response",params:t}).subscribe({next:o=>{o&&(u(o,this.paginatedResponse),this.memberCache.set(Object.values(this.userParams()).join("-"),o))}})}getMember(e){let r=[...this.memberCache.values()].reduce((s,n)=>n.body?s.concat(n.body):s,[]).find(s=>s.username===e);return r?h(r):this.http.get(`${this.baseUrl}/users/${e}`)}updateMember(e){return this.http.put(`${this.baseUrl}/users`,e).pipe()}setMainPhoto(e){return this.http.put(`${this.baseUrl}/users/set-main-photo/${e.id}`,{}).pipe()}deletePhoto(e){return this.http.delete(`${this.baseUrl}/users/delete-photo/${e.id}`).pipe()}static \u0275fac=function(r){return new(r||a)};static \u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"})};export{f as a};
